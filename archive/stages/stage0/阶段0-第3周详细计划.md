# 阶段0 第3周详细学习计划

> **周目标**：
> - 建立对线性 / 指数 / 对数函数的直觉，理解它们在价格、收益和资金曲线中的作用；
> - 提升可视化能力：能画出报告级别的多子图、对数价格图和资金曲线；
> - 完成一个「简单技术指标 + 交易信号 + 回测雏形」的小项目。

---

## 📅 第3周总体安排

- **数学与直觉（每天 30 分钟）**：线性函数、指数函数、对数函数；
- **代码实践（每天 1~1.5 小时）**：
  - 使用 BTC/ETH 历史价格数据；
  - 模拟不同收益率/波动率下的资金曲线；
  - 计算移动平均线（SMA/EMA），构造简单均线策略并画出资金曲线。

建议继续沿用前两周的节奏：

```text
前 30 分钟：数学直觉 + 笔记
后 60~90 分钟：写代码 + 做图
最后 10 分钟：记录今日收获与疑问
```

---

## Day 15（周一）- 线性函数与价格趋势线

**时间**：1.5 小时

- **理论学习（约 30 分钟）**
  - 回顾线性函数 `y = kx + b`：
    - 斜率 k 表示「单位时间价格平均变化量」；
    - 在价格图中，一条向上的直线代表稳定的上升趋势。 
  - 把「价格 vs 时间」看成一条曲线，线性拟合线就是趋势线。

- **代码实践（约 60 分钟）**
  - 使用 `项目1-比特币数据分析.py` 生成或获取最近 120 天的 BTC 收盘价：
    - 将收盘价存放到一个 Pandas `Series` 或 `DataFrame` 中；
  - 使用 `np.polyfit()` 对价格做一条线性拟合：
    - 横轴使用「时间步」或「标准化后的日期索引」；
  - 在同一张图上画出：
    - 原始价格曲线；
    - 拟合得到的线性趋势线；
  - 尝试选取不同时间窗口（比如最近 30/60/120 天）观察趋势线的变化。

- **思考与总结**
  - 趋势线斜率的大小和正负，能说明什么？
  - 什么时候趋势线能帮助你理解行情，什么时候会「骗你」？

---

## Day 16（周二）- 指数函数与复利增长

**时间**：1.5 小时

- **理论学习（约 30 分钟）**
  - 复利公式：`V_t = V_0 * (1 + r)^t`；
  - 固定收益率 vs 波动收益率下的资金曲线直觉：
    - 小小的收益率差异，长期差距非常大；
    - 波动越大，资金曲线越「抖动」，复利效果可能会被严重削弱。

- **代码实践（约 60 分钟）**
  - 使用 NumPy 模拟多条资金曲线：
    - 情形 A：每天固定收益率 0.1%、0.3%、0.5%；
    - 情形 B：每天收益率服从正态分布 `N(0.001, 0.02)`、`N(0.002, 0.03)` 等；
  - 对比：
    - 在同一张图中画出不同参数下的资金曲线；
    - 记录每条曲线的最终收益、最大回撤。

- **思考与总结**
  - 高收益、高波动是不是一定更好？
  - 如果两条曲线最终收益差不多，你会更倾向哪一条？为什么？

---

## Day 17（周三）- 对数函数与对数价格图

**时间**：1.5 小时

- **理论学习（约 30 分钟）**
  - 对数函数的直觉：
    - 对数坐标会压缩大数、放大小数；
    - 适合观察「倍数级」变化（例如价格涨了 10 倍、100 倍）。
  - 对数收益率与对数价格：
    - 多期对数收益率可以直接相加；
    - 长周期的 BTC 价格常用对数坐标来看趋势。

- **代码实践（约 60 分钟）**
  - 选取一段较长周期的 BTC 或 ETH 数据（如 2~3 年，如可用）；
  - 分别画出：
    - 普通坐标下的价格曲线；
    - y 轴为对数坐标的价格曲线（`ax.set_yscale("log")`）；
  - 对比两张图：
    - 在普通坐标下，早期价格波动是否「几乎看不见」？
    - 在对数坐标下，整体趋势是否更容易辨认？

- **思考与总结**
  - 什么时候应该使用对数价格图？
  - 对数坐标会不会「美化」某些暴涨暴跌？

---

## Day 18（周四）- 资金曲线模拟 + 普通/对数坐标对比

**时间**：2 小时

- **学习内容**
  - 综合 Day 16 的复利模拟与 Day 17 的对数坐标：
    - 在一张图里对比不同收益率、波动率下的资金曲线；
    - 再用对数坐标重新审视这些曲线。
  - 学习如何布局多子图，让图表更适合做报告：
    - `plt.subplots()` 的行列布局；
    - 子图间距、共享 x 轴、统一标题和字体大小。

- **练习建议**
  - 构造一个 2x2 综合图：
    1. 左上：普通坐标的资金曲线对比；
    2. 右上：对数坐标的资金曲线对比；
    3. 左下：某一条曲线的收益率直方图；
    4. 右下：该曲线的回撤曲线；
  - 调整：
    - 标题、坐标轴标签、图例、网格线；
    - 保存一张高分辨率图片（例如 `dpi=150`）。

- **成果**
  - 能输出一张可以直接放进学习报告或博客的综合图表。

---

## Day 19（周五）- 移动平均线（SMA/EMA）

**时间**：1.5 小时

- **理论学习（约 30 分钟）**
  - 简单移动平均（SMA）：
    - 最近 N 天价格的算术平均；
  - 指数移动平均（EMA）：
    - 最近数据权重更大，反应更加灵敏；
  - 直观理解：
    - 均线 = 对价格做「平滑处理」，弱化短期噪音，突出中长期趋势。

- **代码实践（约 60 分钟）**
  - 在 BTC/ETH 日线数据上：
    - 计算 5 日、20 日简单移动平均线；
    - 计算 12 日、26 日指数移动平均线；
  - 在同一张图中画出：
    - 收盘价；
    - 对应的 SMA/EMA 曲线；
  - 观察：
    - 哪条线更「平滑」？
    - 哪条线反应价格变化更快？

- **总结**
  - 理解均线的「滞后性」：
    - 越平滑，越滞后；
    - 越敏捷，越容易被噪音拉着跑。

---

## Day 20（周六）- 简单均线金叉策略信号

**时间**：2 小时

- **理论学习（约 30 分钟）**
  - 均线交叉策略基本思想：
    - 短期均线从下向上穿越长期均线（「金叉」）→ 看多信号；
    - 短期均线从上向下跌破长期均线（「死叉」）→ 看空 / 平仓信号。
  - 这是最经典、最简单的趋势跟踪策略之一。

- **代码实践（约 90 分钟）**
  - 在已有 BTC/ETH 数据表中：
    - 添加短期均线列（如 `SMA_5`、`EMA_12`）；
    - 添加长期均线列（如 `SMA_20`、`EMA_26`）。
  - 构造信号列 `signal`：
    - 当短期均线从下向上突破长期均线时，`signal` 从 0 变为 1；
    - 当短期均线从上向下跌破长期均线时，`signal` 从 1 变为 0；
  - 在价格图上标记：
    - 金叉位置（比如绿色箭头）；
    - 死叉位置（红色箭头）。

- **思考**
  - 你觉得这种简单规则的直觉是什么？
  - 在震荡行情里，这种策略会有什么问题？

---

## Day 21（周日）- 综合项目：第一个策略回测雏形

**时间**：4 小时

- **项目目标**
  - 基于 Day 19~20 的均线和信号，完成一个非常简单的回测雏形：
    - 按照 `signal` 决定是否持有标的；
    - 计算策略资金曲线；
    - 与「简单持有」做对比。

- **建议实现步骤**
  1. **准备数据**
     - 保证数据表中包含：日期索引、收盘价、日简单收益率、短期/长期均线、`signal`；
  2. **构造策略收益**
     - 设 `signal_t` 表示第 t 天收盘后的持仓状态（0 = 空仓，1 = 满仓）；
     - 策略在第 t+1 天的收益可以简单设为：`r_strategy_{t+1} = signal_t * r_{t+1}`；
     - 计算策略资金曲线与「简单持有」资金曲线；
  3. **评估与可视化**
     - 计算：
       - 总收益、年化收益率（可粗略按 252 交易日折算）；
       - 最大回撤、波动率；
     - 可视化：
       - 一张图画出「策略资金曲线 vs 简单持有资金曲线」；
       - 一张图画出策略回撤曲线。

- **交付内容**
  - 一个 Notebook 或 `.py` 文件，跑完能输出：
    - 策略与持有的资金曲线对比图；
    - 回撤曲线；
    - 关键统计指标打印结果；
  - 一份不少于 500 字的小结，回答：
    - 这个简单策略的优点和缺点各是什么？
    - 它在哪些行情下可能表现很好，在哪些行情下会很差？
    - 如果要在今后改进它，你最想改的 1~2 个点是什么？

---

## ✅ 第3周学习检查清单

完成以下项目，才算基本通过阶段0 第3周：

### 理论理解
- [ ] 能从直观角度解释线性 / 指数 / 对数函数在价格和收益中的含义；
- [ ] 理解普通价格图与对数价格图各自适用的场景；
- [ ] 理解移动平均线（SMA/EMA）的作用和滞后性；
- [ ] 能描述简单均线金叉策略的核心思想和适用行情。

### 编程与可视化
- [ ] 能用 NumPy 模拟不同收益率和波动率下的资金曲线；
- [ ] 能在同一张图中对比普通坐标和对数坐标；
- [ ] 能用 Matplotlib 构建 2x2 子图并美化（标题、图例、网格、标注）；
- [ ] 能在价格图上叠加多条均线并标记金叉/死叉位置。

### 策略雏形
- [ ] 完成一个「均线策略回测雏形」：
  - [ ] 根据信号计算策略资金曲线；
  - [ ] 计算策略 vs 简单持有的收益与最大回撤；
  - [ ] 输出对比图和简单文字分析。

如果以上项目都完成，那么你已经从「静态数据分析」迈向了「最简单的策略设计与回测」，可以顺利进入后续阶段的更系统学习。
