# 阶段1 第1-4周详细学习计划

> **阶段定位**：基础夯实 —— 在阶段0的数学直觉和工具准备基础上，系统掌握核心数学、pandas 时序分析和加密市场基础。
>
> **对应路线图**：`阶段1：核心数学 + Python数据分析 + 市场入门（2-3月）` 的前 4 周。
>
> **前置要求**：已完成阶段0 Day 1-21（概率统计直觉、NumPy/Pandas 入门、可视化、均线回测雏形）。

---

## 📌 阶段1 前4周总体目标

- **数学**：
  - 建立对正态分布、重尾分布、大数定律、中心极限定理的直觉；
  - 理解线性回归的基本思想和 R² 的含义；
  - 初步理解时间序列中的自相关与平稳性。  
- **Python & pandas**：
  - 熟练使用 `pandas` 处理金融时序数据（索引、重采样、滚动窗口、分组聚合）；
  - 能编写复用性更好的分析函数（例如：收益率计算、指标计算）。
- **市场与项目**：
  - 入门现货/合约交易、手续费和滑点；
  - 连接交易所 API（如币安）获取历史 / 简单实时数据（如条件不具备，可使用本地CSV代替）；
  - 在阶段0均线回测雏形基础上，完成一个**结构更清晰、指标更完整的双均线回测项目**。

> 下文继续沿用全局 Day 计数：阶段0 已到 **Day 21**，阶段1 从 **Day 22** 开始。

---

## 📅 第1周：概率分布 + pandas 巩固

### 周目标
- 理解正态分布及其在收益率分析中的作用；
- 初步体会大数定律、中心极限定理；
- 用 pandas 处理 BTC 日线数据，计算收益率并画出分布图。

### Day 22（周一）- 正态分布直觉 + 数据准备
**时间**：1.5 小时

- [ ] **理论（30 分钟）**
  - 回顾阶段0 中的收益率与直方图；
  - 阅读路线图中“概率分布”小节关于正态分布的部分；
  - 思考：为什么很多模型假设收益率服从正态分布？
- [ ] **代码实践（60 分钟）**
  - 使用 `pandas.read_csv()` 读取 BTC 日线数据（本地或来自公开数据源）；
  - 设置日期为索引，确保按时间排序；
  - 计算简单收益率 `ret` 和对数收益率 `log_ret` 两列；
  - 画出 `log_ret` 的直方图，观察是否近似钟形。
- [ ] **小结（5-10 分钟）**
  - 用 3-5 句话记录你对“收益率分布”的直观印象。

### Day 23（周二）- 分布形状：偏度、峰度
**时间**：1.5 小时

- [ ] **理论（30 分钟）**
  - 了解偏度（Skewness）、峰度（Kurtosis）的直觉含义；
  - 知道“肥尾分布”比正态分布更容易出现极端值。
- [ ] **代码实践（60 分钟）**
  - 使用 `Series.skew()` 和 `Series.kurt()` 计算 BTC 收益率的偏度和峰度；
  - 对比不同时间窗口（例如最近 3 个月 / 1 年）的偏度和峰度；
  - 画出不同窗口内收益率的直方图进行对比。
- [ ] **思考**
  - 如果一个资产收益率的峰度很高，这对风险管理有什么启示？

### Day 24（周三）- 大数定律 & 中心极限定理（模拟）
**时间**：1.5 小时

- [ ] **理论（30 分钟）**
  - 阅读路线图中“大数定律 & 中心极限定理”小节；
  - 只追求直觉，不追求严格证明：
    - 实验次数越多，平均值越稳定（大数定律）；
    - 很多独立随机变量的和/均值会趋近于正态分布（中心极限定理）。
- [ ] **代码实践（60 分钟）**
  - 使用 NumPy 模拟：
    - 抛硬币 N 次，计算每次实验的平均值，观察 N 增大时的稳定性；
    - 模拟“日收益率”，计算多日收益率之和/均值的分布；
  - 画出不同 N 下样本均值的分布，观察是否接近正态分布。

### Day 25（周四）- pandas 核心操作复习
**时间**：1.5 小时

- [ ] **知识点复习**
  - `DataFrame` / `Series` 的基本概念；
  - `loc` / `iloc` 索引方式；
  - 日期索引 `set_index`, `to_datetime`；
  - 缺失值处理：`dropna()`, `fillna()`。
- [ ] **练习**
  - 对 BTC 日线数据：
    - 选取固定日期区间（如 2021-01-01 至 2021-12-31）；
    - 提取子集、重设索引；
    - 删除缺失值并统计剩余数据量；
  - 用 `describe()` 查看价格和收益率的基本统计量。

### Day 26（周五）- 重采样与滚动窗口
**时间**：1.5 小时

- [ ] **知识点**
  - 时间重采样：`resample('W')`, `resample('M')`；
  - 滚动窗口：`rolling(window=20).mean()`；
  - 滚动统计与时序特征提取。
- [ ] **练习**
  - 将 BTC 日线数据重采样为周线/ 月线，计算收盘价和收益率；
  - 计算 7 日、30 日滚动波动率（收益率标准差）；
  - 画出价格 + 滚动波动率的 2x1 子图。

### Day 27-28（周末）- 迷你项目：BTC 收益率分布分析
**时间**：约 4 小时

- [ ] **项目目标**
  - 检验 BTC 日收益率是否可以近似看成正态分布；
  - 比较不同时间窗口内分布形状的变化。
- [ ] **建议步骤**
  1. 选取一个较长样本（例如 3-5 年）；
  2. 计算对数收益率，并分成若干时间段（按年份或按牛熊周期）；
  3. 对每个时间段：
     - 画收益率直方图；
     - 计算均值、标准差、偏度、峰度；
  4. 输出一张 2x2 或 3x2 子图，对比不同时间段；
  5. 写一段不少于 300 字的分析：哪段时期更“平稳”，哪段时期极端波动更多？

---

## 📅 第2周：概率分布深化 + 市场基础入门

### 周目标
- 通过更多模拟巩固大数定律与中心极限定理；
- 理解不同币种波动率差异；
- 初步了解现货 / 合约、杠杆、手续费和滑点。

### Day 29（周一）- 大数定律 / 中心极限定理巩固
**时间**：1.5 小时

- [ ] **模拟实验**
  - 继续使用不同分布（如均匀分布、重尾分布）做样本均值的模拟；
  - 对比不同分布在“样本均值收敛速度”上的差异；
  - 尝试用直方图 + QQ 图（若熟悉）观察是否接近正态分布。
- [ ] **总结**
  - 用 3 个要点写下你对中心极限定理的“工程师版本”理解。

### Day 30（周二）- 多币种波动率对比
**时间**：1.5 小时

- [ ] **数据准备**
  - 获取 BTC、ETH、其它 1-2 个主流币的日线数据；
  - 统一时间区间，并合并为一个 `DataFrame`；
- [ ] **分析**
  - 计算各币种的日收益率及年化波动率（简单按 252 交易日估算）；
  - 画出多币种收益率分布对比图；
  - 找出波动率最高和最低的币种。

### Day 31（周三）- 交易类型与杠杆直觉
**时间**：1.5 小时

- [ ] **理论**
  - 阅读路线图中“交易类型”与“交易成本”小节：
    - 现货 vs 合约（永续 / 交割）；
    - 杠杆、保证金、强平；
    - 手续费、滑点、资金费率。
- [ ] **简单计算**
  - 设想：
    - 现货单次买入 1000 USDT，手续费 0.1%；
    - 合约 5 倍杠杆，手续费 0.04%，考虑资金费率；
  - 粗略计算一笔开仓 + 平仓的成本占比，用代码或手算皆可。

### Day 32（周四）- pandas 封装：收益率与波动率函数
**时间**：1.5 小时

- [ ] **目标**
  - 将阶段0中零散的收益率与波动率计算整理成可复用函数；
- [ ] **练习**
  - 编写函数 `calc_returns(df)`：输入价格序列，输出包含简单收益率和对数收益率的 `DataFrame`；
  - 编写函数 `calc_annual_vol(returns, freq=252)`：输入日度收益率，输出年化波动率；
  - 在多币种数据上调用这些函数，验证结果是否合理。

### Day 33（周五）- 绩效指标初步整理
**时间**：1.5 小时

- [ ] **知识点**
  - 回顾阶段0中的最大回撤与夏普比率；
  - 补充：累计收益率、年化收益率的计算公式。
- [ ] **练习**
  - 对某一币种的“简单持有策略”：
    - 计算从起始日期到现在的累计收益率、年化收益率、年化波动率、最大回撤；
    - 尝试输出一个简单的“绩效摘要”字典或 `DataFrame`。

### Day 34-35（周末）- 迷你项目：多币种波动率 & 成本对比
**时间**：约 4 小时

- [ ] **项目目标**
  - 对比 3-4 个主流币的波动率与“假设交易成本”；
- [ ] **建议步骤**
  1. 选取统一时间段的数据；
  2. 计算每个币种的年化波动率和最大回撤；
  3. 假设固定手续费率，估算“日内交易 1 次”的平均成本占比；
  4. 用表格 + 图形展示结果，并写 300-500 字分析：
     - 哪些币种更适合做趋势跟踪？
     - 高频交易在加密市场上的成本压力有多大？

---

## 📅 第3周：回归分析 + 相关性应用

### 周目标
- 建立线性回归的直观理解（不追求推导）；
- 能用回归分析 ETH 对 BTC 的价格关系；
- 进一步理解相关性在多资产组合中的意义。

### Day 36（周一）- 线性回归直觉
**时间**：1.5 小时

- [ ] **理论（30 分钟）**
  - 阅读路线图中“线性回归”小节，聚焦：
    - 最小二乘法的几何直觉（找到“离点最近”的一条线）；
    - R² 代表解释度；
    - 残差 = 实际值 - 拟合值。
- [ ] **代码实践（60 分钟）**
  - 构造一组简单的 (`x`, `y`) 数据并拟合直线：
    - 使用 `np.polyfit(x, y, 1)` 求斜率和截距；
    - 使用 `np.polyval()` 计算拟合值；
  - 画出散点图 + 拟合直线，并大致计算 R²。

### Day 37（周二）- ETH 对 BTC 的回归
**时间**：1.5 小时

- [ ] **数据准备**
  - 选取同一时间段的 BTC、ETH 日收盘价；
  - 将二者合并到同一个 `DataFrame`，对齐日期；
- [ ] **回归分析**
  - 以 BTC 价格为自变量，ETH 价格为因变量做线性回归；
  - 画出 ETH vs BTC 的散点图与拟合直线；
  - 观察残差随时间的变化（可画残差时间序列）。

### Day 38（周三）- 回归诊断与稳定性
**时间**：1.5 小时

- [ ] **分析**
  - 将 Day 37 的样本分成两个时间段（前半段 / 后半段）；
  - 在两个子样本上分别做回归，对比斜率与 R²；
  - 思考：回归关系是否稳定？如果不稳定，这种模型的风险是什么？

### Day 39（周四）- 市场微观结构入门
**时间**：1.5 小时

- [ ] **阅读与思考**
  - 阅读路线图中“市场微观结构”小节：订单簿、买一卖一价差、深度与流动性；
  - 找一两个交易所盘口截图或使用公开 API 看实时深度；
  - 思考：
    - 深度浅时，大单会带来多大的冲击？
    - 价差与滑点的关系是什么？

### Day 40（周五）- 尝试连接交易所 API（或准备数据）
**时间**：1.5 小时

- [ ] **准备**
  - 如条件允许，注册并获取币安等交易所的 API Key（注意安全：密钥只放在本地 `.env` 等配置文件中，不要提交到仓库）。
- [ ] **实践**（二选一）：
  - 若能访问 API：
    - 使用官方 Python SDK 或 `requests` 获取某币种近 N 天的 K 线数据；
    - 保存为 CSV 并用 pandas 读入；
  - 若暂时无法连 API：
    - 选择一个公开历史数据源，下载 CSV，统一字段命名和时区；
    - 把数据放入 `data/` 目录备用。

### Day 41-42（周末）- 迷你项目：BTC & ETH 关系研究
**时间**：约 4 小时

- [ ] **项目目标**
  - 用回归与相关性方法，分析 BTC 与 ETH 的价格联动关系。
- [ ] **建议步骤**
  1. 选取至少 1 年的历史数据；
  2. 分成多个子区间（例如按季度）；
  3. 对每个区间：
     - 计算收益率相关系数；
     - 对价格 / 对数价格做回归，记录斜率、截距、R²；
  4. 画出“时间区间 vs 相关系数 / R²”的折线图；
  5. 写一段分析：
     - 什么时候两者关系更紧密？
     - 是否存在明显“脱锚”时期？

---

## 📅 第4周：时间序列基础 + 为策略做准备

### 周目标
- 理解自相关、滞后、平稳性的直觉；
- 知道为何价格常需转换为收益率来建模；
- 为后续双均线策略的系统化回测准备好特征与数据结构。

### Day 43（周一）- 自相关与滞后
**时间**：1.5 小时

- [ ] **理论**
  - 阅读路线图中“自相关”小节，理解：
    - 自相关刻画“当前与过去”的关系；
    - 滞后（Lag）的概念（1 日滞后、5 日滞后等）。
- [ ] **代码实践**
  - 使用 pandas `Series.autocorr(lag=k)` 计算收益率在不同滞后下的自相关；
  - 画出自相关条形图（简单版本的 ACF 图）。

### Day 44（周二）- 平稳性直觉与差分
**时间**：1.5 小时

- [ ] **理论**
  - 阅读路线图中“平稳性”小节：
    - 平稳序列的均值、方差大致不随时间变化；
    - 价格通常是非平稳的，收益率更接近平稳。
- [ ] **代码实践**
  - 对价格序列做一次差分，得到 `diff_price`；
  - 对比价格、收益率、差分序列的图形与统计量；
  - 观察哪一种更“稳定”。

### Day 45（周三）- ADF 检验（可选进阶）
**时间**：1.5 小时

- [ ] **可选进阶**（如已安装 `statsmodels`）
  - 尝试使用 `adfuller` 对价格与收益率做平稳性检验；
  - 理解检验结果中的 p-value 与“拒绝单位根假设”的含义，无需深究数学细节。
- [ ] **若未安装相关库**
  - 通过更多可视化 + 移动平均 / 滚动方差，观察序列是否稳定；
  - 用自己的语言写下“如何通过图形判断序列是否稳定”。

### Day 46（周四）- 构建策略所需的特征表
**时间**：1.5 小时

- [ ] **目标**
  - 为后续双均线策略准备一个包含所有关键字段的 `DataFrame`：
    - 日期索引；
    - 收盘价、对数收益率；
    - 短期 / 长期均线（如 5 日 / 20 日）；
    - 其他指标（如滚动波动率等，可选）。
- [ ] **练习**
  - 从原始 K 线数据出发，按步骤生成上述特征表，并保存为 CSV 供后续复用。

### Day 47（周五）- 绩效指标函数整理
**时间**：1.5 小时

- [ ] **目标**
  - 把阶段0 / 阶段1零散写过的绩效指标整合成一组函数：
    - 累计收益率、年化收益率、年化波动率；
    - 最大回撤；
    - 夏普比率（可先假设无风险利率为 0）。
- [ ] **练习**
  - 对“简单持有策略”调用这些函数，生成一个统一的绩效报告结构（字典或 `DataFrame`）。

### Day 48-49（周末）- 项目：第一个系统化双均线回测
**时间**：约 4-5 小时

- [ ] **项目目标**
  - 在阶段0 均线回测雏形基础上：
    - 梳理清晰的数据准备 → 信号生成 → 回测循环 → 绩效评估流程；
    - 输出一份包含曲线和指标的“正式策略报告”。
- [ ] **建议步骤**
  1. **数据与特征**：
     - 复用 Day 46 构建的特征表；
  2. **信号生成**：
     - 使用短期 / 长期均线构造 `signal` 列（0=空仓，1=持有）；
  3. **回测循环**：
     - 按路线图示意，计算每日策略收益与资金曲线；
     - 同时计算简单持有策略资金曲线；
  4. **绩效评估**：
     - 调用 Day 47 的绩效函数，输出策略与持有的对比表；
  5. **可视化**：
     - 一张图画策略 vs 持有资金曲线；
     - 一张图画策略回撤曲线；
  6. **文字总结**：
     - 不少于 500 字，回答：
       - 这个策略在哪些行情下有效？
       - 它有哪些明显缺点？
       - 你在后续阶段最想改进的 1-2 个方向是什么？

---

## ✅ 阶段1 前4周学习检查清单

- **数学理解**
  - [ ] 能解释正态分布、大数定律、中心极限定理的“工程师直觉”；
  - [ ] 理解线性回归的基本思想、R² 和残差的含义；
  - [ ] 理解自相关、滞后和平稳性的直观意义。
- **编程与数据分析**
  - [ ] 能用 pandas 读取、清洗、重采样和合并多币种时序数据；
  - [ ] 能封装收益率、波动率、绩效指标等常用函数；
  - [ ] 能构建用于策略回测的特征表（价格、收益率、指标）。
- **项目与市场认知**
  - [ ] 完成至少 2 个迷你项目（收益率分布分析、多币种波动率对比、BTC & ETH 关系研究等）；
  - [ ] 完成一个系统化的双均线回测项目，并输出图表 + 文字报告；
  - [ ] 理解现货 / 合约、手续费、滑点、订单簿深度等基础概念。

> 完成以上检查项后，你在“基础夯实”阶段就已经打好了较坚实的理论与工程基础，可以按路线图继续深入时间序列、更多策略范式以及回测框架的系统设计。
