# 阶段1 第5-8周详细学习计划

> **阶段定位**：基础夯实（下半程）—— 在前 4 周的概率分布、回归、时间序列入门与首个双均线回测项目基础上，进一步加强时间序列理解、指标体系与交易成本建模，并将单一策略在多标的、多周期上做初步实证。
>
> **对应路线图**：继续承接 `阶段1：基础夯实 - 核心数学 + Python数据分析 + 市场入门（2-3月）`，重点是时间序列基础的巩固、金融指标实战和市场微观结构相关的实践。
>
> **前置要求**：已完成阶段1 第1-4周（Day 22-49），尤其是：
> - 能构建包含价格、收益率、均线等特征的 DataFrame；
> - 能完成一个系统化的双均线回测（含绩效评估与可视化）。

> 下文继续沿用全局 Day 计数：上一文档结束于 **Day 49**，本计划从 **Day 50** 开始。

---

## 📌 阶段1 后4周总体目标

- **时间序列与波动结构**：
  - 理解波动聚类、高波动/低波动区间的划分方法；
  - 学会用滚动统计量、自相关等工具刻画市场“状态”。
- **指标与交易成本**：
  - 熟悉常见技术指标（布林带、RSI 等）的计算与使用场景；
  - 能在回测中加入手续费与简单滑点模型，看到“含成本”和“不含成本”的差异。
- **策略应用与小型研究**：
  - 将双均线策略应用到多币种、多时间区间进行对比；
  - 形成一份结构清晰的小型研究报告，为阶段2的系统化回测框架打基础。

---

## 📅 第5周：时间序列特征 + 波动结构深入

### 周目标
- 掌握滚动自相关、滚动波动率的计算与可视化；
- 能粗略划分“高波动/低波动”市场状态；
- 初步用数据解释“波动聚类”现象。

### Day 50（周一）- 滚动统计量回顾
**时间**：1.5 小时

- [ ] **理论与复习**
  - 回顾前 4 周的重采样与滚动窗口：`rolling()`, `expanding()`；
  - 理解“滚动均值/滚动标准差”在时间序列分析中的含义。
- [ ] **代码实践**
  - 对 BTC 日度收益率：
    - 计算 20 日滚动均值和滚动标准差；
    - 画出“收益率 + 滚动标准差”的 2x1 子图；
  - 粗略观察：高波动时期的滚动标准差是否显著抬升。

### Day 51（周二）- 滚动自相关与状态切分
**时间**：1.5 小时

- [ ] **知识点**
  - 自相关函数（ACF）的直觉：衡量“当前与过去”的相关程度；
  - 滚动自相关可用来观察“短期可预测性”的变化趋势。
- [ ] **练习**
  - 对 BTC 日收益率：
    - 计算不同滞后（lag=1,5）的自相关系数；
    - 构造 60 日滚动窗口的自相关时间序列；
  - 尝试给出一个简单规则：比如按滚动波动率或滚动自相关，把样本分成“高波动/低波动”区间（用阈值划分即可）。

### Day 52（周三）- 波动聚类与极端行情
**时间**：1.5 小时

- [ ] **理论**
  - 认识“波动聚类”：大波动往往簇拥出现，小波动也会扎堆；
  - 了解极端行情（如 3·12、5·19 等）在时间序列上的表现特征。
- [ ] **代码实践**
  - 筛选收益率绝对值超过某个阈值（如 3% 或 5%）的日期，标记为“极端波动日”；
  - 在价格图或收益率图上标出这些日期；
  - 观察这些日子是否集中出现在某些时间区间。

### Day 53（周四）- 多时间窗口波动对比
**时间**：1.5 小时

- [ ] **目标**
  - 对比不同观察窗口（如 20 日、60 日、120 日）下，波动率的估计结果；
- [ ] **练习**
  - 对 BTC 日收益率：
    - 分别计算 20/60/120 日滚动波动率；
    - 画在同一张图上（可用不同颜色的线）；
  - 思考：
    - 窗口较短时，波动率曲线有什么特征？
    - 窗口较长时，又有什么变化？

### Day 54（周五）- 时间序列特征工程初步
**时间**：1.5 小时

- [ ] **知识点**
  - 时间特征：星期几（周一/周末效应）、月份、是否节假日（可选）；
  - 简单的“因子化思维”：用一列特征来解释收益率行为。
- [ ] **练习**
  - 给 BTC 日度数据添加：
    - 星期几特征（0-6）；
    - 是否周末（布尔值）；
  - 按星期几分组，统计：
    - 每天平均收益率、标准差；
  - 观察是否存在明显的“星期效应”（可以只是感性认识）。

### Day 55-56（周末）- 迷你项目：波动聚类与状态划分
**时间**：约 4 小时

- [ ] **项目目标**
  - 用滚动波动率和简单规则，将历史行情划分为“高波动期”和“低波动期”，并进行可视化与描述。
- [ ] **建议步骤**
  1. 使用 60 日滚动波动率或你认为合适的窗口；
  2. 选取一个阈值（例如滚动波动率的中位数或 75% 分位数）划分高/低波动期；
  3. 在价格图上用不同底色或标记区间表示高/低波动期；
  4. 分别统计高/低波动期内的平均收益率、极端波动日频率；
  5. 写一段 300-500 字的小结：
     - 高波动期和低波动期有什么典型特征？
     - 你会更愿意在什么样的时期运行趋势策略？

---

## 📅 第6周：技术指标体系 + 交易成本建模

### 周目标
- 熟悉布林带、RSI 等指标的计算和使用场景；
- 能在回测中加入基本手续费与简单滑点模型；
- 对“手续费后策略表现显著变差”有直观认识。

### Day 57（周一）- 布林带（Bollinger Bands）
**时间**：1.5 小时

- [ ] **理论**
  - 中轨 = N 日均线，上下轨 = 中轨 ± k × N 日标准差；
  - 直觉：价格在带内波动，大部分时间不会突破上下轨。
- [ ] **代码实践**
  - 对 BTC 日线价格：
    - 计算 20 日均线与 20 日收益率标准差；
    - 计算布林带上下轨；
    - 画出价格 + 中轨 + 上下轨图表；
  - 观察：价格在上下轨附近的行为（突破、反弹等）。

### Day 58（周二）- RSI 相对强弱指标
**时间**：1.5 小时

- [ ] **理论**
  - RSI 的基本计算思想：上涨 / 下跌幅度的相对强弱；
  - 常见区间：RSI>70 视为超买，RSI<30 视为超卖（只是经验规则）。
- [ ] **代码实践**
  - 为 BTC 日线构建 RSI 指标（可以用手写逻辑或调用现成库，推荐先手写理解）；
  - 画出价格 + RSI 的 2x1 子图；
  - 观察若干 RSI 极端值对应的价格行为。

### Day 59（周三）- 指标封装与复用
**时间**：1.5 小时

- [ ] **目标**
  - 将 SMA/EMA、布林带、RSI 等指标封装成函数，方便重复调用。
- [ ] **练习**
  - 编写若干函数：如 `add_sma_ema(df, windows)`, `add_bbands(df, window, k)`, `add_rsi(df, window)`；
  - 在同一份 K 线数据上调用这些函数，生成包含多列指标的特征表；
  - 注意函数要尽量通用（可传入列名、窗口参数等）。

### Day 60（周四）- 手续费模型与简单滑点
**时间**：1.5 小时

- [ ] **理论**
  - 手续费、点差与滑点对策略收益的影响；
  - 在日线策略中，可以用“每次开平仓固定成本占比”做一阶近似。
- [ ] **练习**
  - 在之前的双均线回测代码基础上：
    - 为每次“持仓状态改变”的操作增加一次交易成本（例如单边 0.1%）；
    - 重新计算策略资金曲线与绩效指标；
  - 对比“含成本”和“不含成本”的收益率与最大回撤差异。

### Day 61（周五）- 将双均线策略扩展到其他币种
**时间**：1.5 小时

- [ ] **目标**
  - 在相同策略参数下，比较不同币种上的表现差异。
- [ ] **练习**
  - 选取 2-3 个其它主流币（日线数据）；
  - 使用统一的双均线参数与手续费假设，分别回测；
  - 使用表格汇总：
    - 总收益率、最大回撤、年化波动率、交易次数等；
  - 简单讨论：
    - 哪个币种更适合此策略？

### Day 62-63（周末）- 项目：含交易成本的双均线策略小结
**时间**：约 4 小时

- [ ] **项目目标**
  - 形成一份关于“双均线 + 手续费模型”的完整小结报告。
- [ ] **建议步骤**
  1. 明确参数设定（短期/长期均线、手续费率等）；
  2. 在 BTC 和至少 2 个其他币种上运行回测；
  3. 汇总绩效指标到一张表格中；
  4. 输出关键图表：
     - 资金曲线对比图；
     - 回撤曲线；
  5. 写 500 字左右的小结：
     - 手续费对策略的影响有多大？
     - 在不同币种上表现差异如何？
     - 如果要继续优化，你会从“降低交易频率 / 优化进出场条件”等哪些方向入手？

---

## 📅 第7周：多标的、多区间的策略表现对比

### 周目标
- 学会在多个时间区间、多个币种上批量运行同一策略；
- 能用表格和简单统计方法，描述策略在不同市场环境下的表现差异；
- 不追求“调参寻找最优”，更关注“策略稳定性和适用场景”。

### Day 64（周一）- 时间区间划分与样本描述
**时间**：1.5 小时

- [ ] **知识点**
  - 时间段划分的方式：按年份、按牛熊周期、按波动水平等；
  - 简单样本描述：每个时间段的波动率、最大回撤等。
- [ ] **练习**
  - 以 BTC 为例，将样本划分为若干区间（例如按年份或自定义节点）；
  - 对每个区间，统计：
    - 年化波动率、最大回撤、平均日收益率；
  - 为每个区间赋予一个标签（如“高波动期”、“相对平稳期”等）。

### Day 65（周二）- 不同时间区间上的双均线策略表现
**时间**：1.5 小时

- [ ] **目标**
  - 固定一套策略参数，比较在不同时间区间的表现差异。
- [ ] **练习**
  - 在前一天划分的若干时间段上分别运行双均线策略；
  - 对每个时间段，记录：
    - 总收益率、最大回撤、年化收益率；
  - 画出简单的柱状图或条形图，对比各时间段的策略表现。

### Day 66（周三）- 多币种 + 多时间区间组合分析
**时间**：1.5 小时

- [ ] **目标**
  - 综合“多币种 + 多时间段”的结果，初步了解策略适合的标的和环境。
- [ ] **练习**
  - 在 2-3 个主流币上重复 Day 64-65 的分析流程；
  - 生成一个多维表格（例如行：币种-时间段，列：绩效指标）；
  - 标记出表现明显较好/较差的组合，尝试寻找共性（如高波动期更适合、特定币种更适配等）。

### Day 67（周四）- 策略鲁棒性初步讨论（概念为主）
**时间**：1.5 小时

- [ ] **理论**
  - 什么是“鲁棒性”：策略在不同标的、不同阶段下表现不过于极端波动；
  - 简单区分：一次性调参找到“历史最优” vs 在多个区间都表现尚可；
  - 不深入过拟合与样本外测试（留到阶段2），只建立直觉。
- [ ] **思考与记录**
  - 根据前几天的结果，回答：
    - 在哪些标的/时间段上，双均线策略表现稳定？
    - 有哪些明显“很糟糕”的组合？
  - 写一段 300 字左右的文字卷宗，给“策略鲁棒性”下一个你自己的工作定义。

### Day 68（周五）- 结果可视化与展示整理
**时间**：1.5 小时

- [ ] **目标**
  - 整理多标的、多时间段的绩效结果，并用一两张图清晰表达。
- [ ] **练习**
  - 尝试制作：
    - 热力图（如果熟悉 seaborn 等库）：行/列为不同标的和时间段，颜色表示收益或夏普；
    - 或者多子图，每个子图代表一个币种的不同时间段表现；
  - 检查文字说明和图例是否清晰，让不看代码的人也能读懂。

### Day 69-70（周末）- 项目：多标的、多时间段表现对比报告
**时间**：约 4 小时

- [ ] **项目目标**
  - 形成一份围绕“双均线策略在不同币种/时间段表现”的小型研究报告。
- [ ] **建议步骤**
  1. 确认要纳入的币种与时间段；
  2. 整理前几天得到的绩效表格和关键图表；
  3. 写一份不少于 800 字的报告，内容包括：
     - 数据说明与方法简述；
     - 主要结果（在哪些环境下表现好/坏）；
     - 对“策略适用场景”的总结；
     - 下一步想尝试的改进方向（可以只列想法，不必实现）。

---

## 📅 第8周：阶段1综合项目 + 文档化

### 周目标
- 整合阶段1 所学的时间序列、指标、市场基础与策略回测技能；
- 产出一份结构完整、可以复看的综合项目（Notebooks + 文档）；
- 为阶段2 的“多策略 + 回测框架”打好项目化基础。

### Day 71（周一）- 综合项目规划
**时间**：1.5 小时

- [ ] **目标**
  - 明确本周综合项目的范围与交付物。
- [ ] **建议**
  - 选择一个主线：例如“BTC 双均线趋势策略在不同周期和成本假设下的表现”；
  - 简要写下：
    - 使用的数据源与时间范围；
    - 要包含的指标与绩效指标；
    - 预期输出的图表种类与文字结论。

### Day 72（周二）- 代码重构：数据处理与特征工程模块
**时间**：1.5 小时

- [ ] **目标**
  - 将零散的“读取数据 + 计算收益率 + 加指标”代码整理为一组可复用函数。
- [ ] **练习**
  - 在一个 Notebook 或 `.py` 文件中：
    - 集中放置数据读取函数（读取 CSV / API 数据）；
    - 集中放置特征工程函数（收益率、滚动波动率、均线、布林带、RSI 等）；
  - 给这些函数加上简要文档字符串（说明输入、输出与用途）。

### Day 73（周三）- 代码重构：策略与回测模块
**时间**：1.5 小时

- [ ] **目标**
  - 将双均线策略与回测逻辑整理为清晰的函数结构。
- [ ] **练习**
  - 编写：
    - 策略信号生成函数（输入特征表，输出 `signal` 列）；
    - 回测执行函数（根据 `signal` 与收益率计算资金曲线，支持手续费参数）；
  - 确保这些函数可以在多币种数据上重复调用。

### Day 74（周四）- 统一绩效评估与图表输出
**时间**：1.5 小时

- [ ] **目标**
  - 将绩效指标计算与图表生成部分规范化。
- [ ] **练习**
  - 编写统一的“评估函数”：
    - 输入资金曲线或收益率，输出绩效指标字典/表格；
  - 编写统一的“绘图函数”：
    - 画资金曲线对比图、回撤曲线等；
  - 在至少一个币种上验证整个流水线从“原始数据 → 策略 → 绩效报告 → 图表”的流程。

### Day 75（周五）- 项目整合与复查
**时间**：1.5 小时

- [ ] **目标**
  - 将综合项目整理为可以一键运行的 Notebook 或脚本，并检查细节。
- [ ] **练习**
  - 统一项目结构：
    - 数据读取部分；
    - 特征工程部分；
    - 策略与回测部分；
    - 绩效评估与可视化部分；
  - 为 Notebook 添加清晰的标题与分节说明；
  - 至少完整运行一遍，确保无报错。

### Day 76-77（周末）- 阶段1综合项目报告
**时间**：约 4-5 小时

- [ ] **项目目标**
  - 完成一份能够代表你阶段1 水平的综合项目报告（文字 + 图表 + 代码）。
- [ ] **建议结构**
  1. 引言：本项目研究什么问题，为什么选这个策略/标的；
  2. 数据与方法：数据来源、时间范围、主要处理步骤（尽量用简洁语言）；
  3. 策略描述：双均线逻辑、参数设定、手续费假设；
  4. 结果展示：资金曲线、回撤、关键指标表格，多标的/多时间段对比；
  5. 讨论与反思：策略优点、缺点、适用场景、潜在改进方向；
  6. 结论：阶段1 你学到了什么、觉得最重要的 3 个收获是什么。
- [ ] **输出形式**
  - 一份 Markdown 或文档文件（可以放在 `docs/` 或 `docs/stages/stage1/` 下），配合 Notebook 截图或图表；
  - 建议将关键代码片段附在附录中，方便未来阶段复用。

---

## ✅ 阶段1 后4周学习检查清单

- **时间序列与波动理解**
  - [ ] 能计算并解释滚动波动率与滚动自相关的含义；
  - [ ] 能用简单规则划分高波动/低波动期并做可视化；
  - [ ] 理解“波动聚类”和极端行情在时间序列上的表现特征。
- **指标与交易成本**
  - [ ] 能手写或调用代码计算布林带与 RSI；
  - [ ] 能将 SMA/EMA、布林带、RSI 等封装为可复用函数；
  - [ ] 能在回测中引入手续费模型，并对比含成本与不含成本的策略表现。
- **策略应用与综合项目**
  - [ ] 在多个币种、多时间段上运行同一套双均线策略并输出对比结果；
  - [ ] 完成一份包含代码、图表与文字分析的阶段1 综合项目；
  - [ ] 能用自己的语言描述双均线策略的适用场景与主要风险来源。

> 至此，阶段1 的“基础夯实”部分告一段落：你已经具备基础的时间序列理解、指标体系搭建能力，以及在单一策略上完成较严谨分析的实践经验。接下来可以按照路线图进入阶段2，学习多策略范式与通用回测框架的设计。
